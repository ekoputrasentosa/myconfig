# Path to your oh-my-zsh installation.
export ZSH="$HOME/.oh-my-zsh"

ZSH_THEME="intheloop"

plugins=(
	zsh-autosuggestions
    zsh-syntax-highlighting
)

source $ZSH/oh-my-zsh.sh

# USER CONFIGURATION

# zsh-autosuggestions
ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE='fg=#20a267'

# Preferred editor for local and remote sessions
if [[ -n $SSH_CONNECTION ]]; then
  export EDITOR='lvim'
else
  export EDITOR='lvim'
fi

#add path to use Sudoedit using Lvim
export SUDO_EDITOR=/home/ekoputra/.local/bin/lvim

# Aliases
alias neofetch="neofetch --ascii $HOME/.config/neofetch/lm_ascii"
alias vim="lvim"
alias yay=paru

# Starting TMUX automatically
session_name="main"

# 1. First you check if a tmux session exists with a given name.
tmux has-session -t=$session_name 2> /dev/null

# 2. Create the session if it doesn't exists.
if [[ $? -ne 0 ]]; then
  TMUX='' tmux new-session -d -s "$session_name"
fi

# 3. Attach if outside of tmux, switch if you're in tmux.
if [[ -z "$TMUX" ]]; then
  touch ~/.temp_key
  tmux attach -t "$session_name"
else
  touch ~/.temp_key
  tmux switch-client -t "$session_name"
fi

# custom 'quit' command for exit both tmux and alacritty, type exit only for exit tmux
export PATH="$HOME/.local/bin:$PATH"
fpath+=${ZDOTDIR:-~}/.zsh_functions

source ~/.zsh_functions/_quit
#exit if tmux has been terminated
cat ~/.temp_key
if [[ $? -ne 0 ]] ; then
    exit 1
fi

eval "$(starship init zsh)"

# Option for showing at startup terminal
# neofetch
# afetch
colorscript random
